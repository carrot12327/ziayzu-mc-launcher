- name: Build JRE JAR files
  run: |
    echo "🔄 Running language list updater..."
    
    # Handle language list creation with fallback
    if [ -f "scripts/languagelist_updater.sh" ]; then
      ./scripts/languagelist_updater.sh
    else
      echo "⚠️ Script not found, creating language list manually..."
      mkdir -p app_pojavlauncher/src/main/assets
      if [ -d "app_pojavlauncher/src/main/res" ]; then
        find app_pojavlauncher/src/main/res -maxdepth 1 -name "values-*" -type d | xargs -r basename -a | sort > app_pojavlauncher/src/main/assets/language_list.txt
      else
        touch app_pojavlauncher/src/main/assets/language_list.txt
      fi
    fi

    mkdir -p out
    
    echo "🔨 Building JRE JAR files..."
    
    # Clean build to avoid cached issues
    gradle clean --no-daemon
    
    # Build with detailed error reporting
    gradle :jre_lwjgl3glfw:build --no-daemon --stacktrace --info
